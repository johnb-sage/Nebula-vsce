{
  "Query Key Factory": {
    "prefix": "qkf",
    "body": [
      "// Query Key Factory",
      "export const ${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${2:/downcase}$3/i}Keys = {",
      "  all: [\"${1:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/${1:/upcase}$2/i}}\"] as const,",
      "  ${2:accountBusiness}: (${3:accountId: string}, ${4:businessId: string}) =>",
      "    [...${1}.all, ${5:accountId}, ${6:businessId}] as const,",
      "};",
      ""
    ],
    "description": "Query Key Factory"
  },
  "Make Query": {
    "prefix": "mkq",
    "body": [
      "// Make Query helper",
      "export const ${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${1:/downcase}$2$3/i}Query = makeQuery(",
      "  (${1:accountId: string}, ${2:businessId: string}) => ({",
      "    queryKey: ${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${2:/downcase}$3/i}Keys.${3:accountBusiness}(${4:accountId}, ${5:businessId}),",
      "    queryFn: ({ signal }) => {",
      "      return fetch${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/$2/i}({ ${6:accountId}, ${7:businessId,} signal });",
      "    },",
      "  })",
      ");"
    ],
    "description": "Make Query helper"
  },
  "Fetch function": {
    "prefix": "ffn",
    "body": [
      "const fetch${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/$2/i} = async ({",
      "  ${1:accountId},",
      "  ${2:businessId},",
      "  signal,",
      "}: {",
      "  ${3:accountId: string};",
      "  ${4:businessId: string};",
      "  signal?: AbortSignal;",
      "}) => {",
      "  const url = buildUrl({",
      "    apiName: \"${5:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/${1:/upcase}$2/i}}\",",
      "    urlParamsToReplace: [",
      "      { Key: \"${6:AccountId}\", Value: ${7:accountId} },",
      "      { Key: \"${8:BusinessId}\", Value: ${9:businessId} },",
      "    ],",
      "  });",
      "  const response = await Request.${10:get}<${11:TData}>(url, {",
      "    signal,",
      "  });",
      "  return ${12:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/${1:/captialize}$2/i}}(response.body);",
      "};"
    ],
    "description": "Fetch function"
  },
  "useQuery": {
    "prefix": "uqy",
    "body": [
      "export const ${TM_FILENAME_BASE} = (${2:accountId: string}, ${3:businessId: string}) => {",
      "  return useQuery<${4:TData}, HttpError>({",
      "    ...${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${1:/downcase}$2$3/i}Query(${5:accountId}, ${6:businessId}),",
      "    refetchOnWindowFocus: false,",
      "  });",
      "};"
    ],
    "description": "useQuery"
  }
}
