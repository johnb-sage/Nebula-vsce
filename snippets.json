{
  "Query Key Factory": {
    "prefix": "tqkf",
    "body": [
      "// Query Key Factory",
      "export const ${1:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${2:/downcase}$3/i}Keys} = {",
      "  all: [\"${2:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/${1:/upcase}$2/i}}\"] as const,",
      "  ${3:accountBusiness}: (${4:accountId: string,} ${5:businessId: string}) =>",
      "    [...${1}.all, ${6:accountId,} ${7:businessId}] as const,",
      "};",
      ""
    ],
    "description": "Query Key Factory"
  },
  "Make Query": {
    "prefix": "mkq",
    "body": [
      "export const ${1:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${1:/downcase}$2$3/i}Query} = makeQuery(",
      "  (${2:accountId: string,} ${3:businessId: string}) => ({",
      "    queryKey: ${4:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.)(.*)/${2:/downcase}$3/i}Keys}.${5:accountBusiness}(${6:accountId,} ${7:businessId}),",
      "    queryFn: ({ signal }) => {",
      "      return ${8:fetch${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/$2/i}}({ ${9:accountId,} ${10:businessId,} signal });",
      "    },",
      "  })",
      ");"
    ],
    "description": "Make Query helper"
  },
  "Fetch function": {
    "prefix": "ffn",
    "body": [
      "const ${1:fetch${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/$2/i}} = async ({",
      "  accountId,",
      "  businessId,",
      "  signal,",
      "}: {",
      "  accountId: string;",
      "  businessId: string;",
      "  signal?: AbortSignal;",
      "}) => {",
      "  const url = buildUrl({",
      "    apiName: \"${2:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/${1:/upcase}$2/i}}\",",
      "    urlParamsToReplace: [",
      "      { Key: \"AccountId\", Value: accountId },",
      "      { Key: \"BusinessId\", Value: businessId },",
      "    ],",
      "  });",
      "  const response = await Request.${3:get}<${4:ProductInstance[]}>(url, {",
      "    signal,",
      "  });",
      "  return ${5:${TM_FILENAME_BASE/^use(get|post|patch|delete)(.*)/${1:/captialize}$2/i}}(response.body);",
      "};"
    ],
    "description": "Fetch function"
  }
}
